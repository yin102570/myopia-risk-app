# AIè¿‘è§†é£é™©æ™ºèƒ½é¢„æµ‹ä¸é˜²æ§ç³»ç»Ÿ

> åŸºäºæ·±åº¦å­¦ä¹ çš„é’å°‘å¹´è¿‘è§†é£é™©é¢„æµ‹å…¨æ ˆåº”ç”¨ï¼Œé›†æˆGANæ•°æ®ç”Ÿæˆã€å¤šæ¨¡å‹é¢„æµ‹ã€å®æ—¶ç›‘æ§

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„å…¨æ ˆAIåº”ç”¨ï¼Œæ—¨åœ¨é€šè¿‡å…ˆè¿›çš„æœºå™¨å­¦ä¹ æŠ€æœ¯å’Œæ·±åº¦å­¦ä¹ æ–¹æ³•ï¼Œä¸ºé’å°‘å¹´æä¾›ç²¾å‡†çš„è¿‘è§†é£é™©è¯„ä¼°å’Œä¸ªæ€§åŒ–é˜²æ§å»ºè®®ã€‚ç³»ç»Ÿæ•´åˆäº†çœŸå®ä¸´åºŠæ•°æ®ã€AIç”Ÿæˆçš„è™šæ‹Ÿæ•°æ®å’Œå…¬å¼€åŒ»å­¦æ•°æ®åº“ï¼Œçªç ´äº†ä¼ ç»Ÿå°æ ·æœ¬é™åˆ¶ï¼Œå®ç°äº†é«˜ç²¾åº¦çš„é£é™©é¢„æµ‹ã€‚

### æ ¸å¿ƒä»·å€¼

- **AIæ•°æ®ç”Ÿæˆ**ï¼šä½¿ç”¨ç”Ÿæˆå¼å¯¹æŠ—ç½‘ç»œ(GAN)ç”Ÿæˆé«˜è´¨é‡è™šæ‹Ÿçœ¼éƒ¨ç»“æ„æ•°æ®
- **å¤šæºæ•°æ®èåˆ**ï¼šæ•´åˆçœŸå®æ•°æ®ã€AIç”Ÿæˆæ•°æ®ã€å…¬å¼€æ•°æ®åº“ä¸‰ç±»æ•°æ®æº
- **å¤šæ¨¡å‹é¢„æµ‹**ï¼šæ”¯æŒéšæœºæ£®æ—ã€æ¢¯åº¦æå‡ã€é€»è¾‘å›å½’ã€SVMç­‰å¤šç§æœºå™¨å­¦ä¹ æ¨¡å‹
- **ç§‘å­¦å¯è§£é‡Š**ï¼šè¯¦ç»†çš„ç‰¹å¾é‡è¦æ€§åˆ†æå’Œå®Œæ•´çš„æ¨¡å‹è¯„ä¼°æŠ¥å‘Š
- **å®æ—¶ç›‘æ§**ï¼šä»»åŠ¡ç®¡ç†ç³»ç»Ÿå®ç°å¼‚æ­¥æ‰§è¡Œå’Œè¿›åº¦è·Ÿè¸ª
- **ä¸€é”®éƒ¨ç½²**ï¼šDocker + Docker Composeå®ç°å¿«é€Ÿéƒ¨ç½²

---

## ğŸ¯ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯å±‚ (React)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  ä»ªè¡¨ç›˜     â”‚  â”‚  é£é™©é¢„æµ‹   â”‚  â”‚  æ•°æ®ç”Ÿæˆ   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚  æ¨¡å‹è®­ç»ƒ   â”‚  â”‚  ä»»åŠ¡ç®¡ç†   â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“ HTTP/Axios
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      APIå±‚ (Flask/Express)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚/api/health  â”‚  â”‚/api/predict â”‚  â”‚/api/data/   â”‚             â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚  generate   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚/api/model/  â”‚  â”‚/api/tasks/  â”‚                           â”‚
â”‚  â”‚  train      â”‚  â”‚             â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é€»è¾‘å±‚ (Python)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚TaskManager  â”‚  â”‚æ•°æ®ç”Ÿæˆå¼•æ“ â”‚  â”‚æ¨¡å‹è®­ç»ƒå¼•æ“ â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æœºå™¨å­¦ä¹ å±‚ (TensorFlow/Scikit)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ GANç”Ÿæˆå™¨   â”‚  â”‚éšæœºæ£®æ—/    â”‚  â”‚æ ‡å‡†åŒ–å™¨/     â”‚             â”‚
â”‚  â”‚åˆ¤åˆ«å™¨       â”‚  â”‚æ¢¯åº¦æå‡ç­‰   â”‚  â”‚ç‰¹å¾å·¥ç¨‹     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Pickleæ¨¡å‹ â”‚  â”‚  CSVæ•°æ®    â”‚  â”‚  æ—¥å¿—æ–‡ä»¶   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| React | 18 | UIæ¡†æ¶ |
| TypeScript | 5.x | ç±»å‹å®‰å…¨ |
| Material-UI | 6 | UIç»„ä»¶åº“ |
| Recharts | 2.x | æ•°æ®å¯è§†åŒ– |
| Axios | 1.x | HTTPå®¢æˆ·ç«¯ |
| Vite | 5.x | æ„å»ºå·¥å…· |

#### åç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Python | 3.8+ | ä¸»è¦å¼€å‘è¯­è¨€ |
| Flask | 2.x | Webæ¡†æ¶ |
| TensorFlow/Keras | 2.x | æ·±åº¦å­¦ä¹  |
| Scikit-learn | 1.x | æœºå™¨å­¦ä¹  |
| NumPy | 1.26 | æ•°å€¼è®¡ç®— |
| Pandas | 2.2 | æ•°æ®å¤„ç† |
| Joblib | 1.4 | æ¨¡å‹åºåˆ—åŒ– |

#### éƒ¨ç½²æŠ€æœ¯

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Docker | å®¹å™¨åŒ– |
| Docker Compose | å¤šå®¹å™¨ç¼–æ’ |
| Nginx | åå‘ä»£ç† |

---

## ğŸ”¬ æ ¸å¿ƒç®—æ³•

### 1. GANæ•°æ®ç”Ÿæˆ

#### ç®—æ³•åŸç†
ç”Ÿæˆå¼å¯¹æŠ—ç½‘ç»œ(GAN)ç”±ä¸¤ä¸ªç¥ç»ç½‘ç»œç»„æˆï¼š
- **ç”Ÿæˆå™¨(Generator)**ï¼šå­¦ä¹ çœŸå®æ•°æ®åˆ†å¸ƒï¼Œç”Ÿæˆè™šæ‹Ÿæ•°æ®
- **åˆ¤åˆ«å™¨(Discriminator)**ï¼šåŒºåˆ†çœŸå®æ•°æ®å’Œç”Ÿæˆæ•°æ®

#### è®­ç»ƒæµç¨‹
```
çœŸå®æ•°æ® â†’ åˆ¤åˆ«å™¨ â†’ çœŸå‡åˆ¤æ–­
           â†‘
ç”Ÿæˆå™¨ â†’ è™šæ‹Ÿæ•°æ® â†’ åˆ¤åˆ«å™¨ â†’ çœŸå‡åˆ¤æ–­
           â†“
      æ›´æ–°ç”Ÿæˆå™¨å‚æ•°
```

#### æ•°æ®éªŒè¯
- **KSæ£€éªŒ(Kolmogorov-Smirnov)**ï¼šæ£€éªŒç”Ÿæˆæ•°æ®ä¸çœŸå®æ•°æ®çš„åˆ†å¸ƒä¸€è‡´æ€§
- **å¯è§†åŒ–å¯¹æ¯”**ï¼šé€šè¿‡å›¾è¡¨ç›´è§‚å±•ç¤ºæ•°æ®åˆ†å¸ƒå·®å¼‚
- **åŒé‡æ ‡å‡†**ï¼šKSæ£€éªŒpå€¼>0.05ä¸”å¯è§†åŒ–é€šè¿‡æ‰ç®—åˆæ ¼

### 2. å¤šæ¨¡æ€æ•°æ®èåˆ

ç³»ç»Ÿæ•´åˆä¸‰ç±»æ•°æ®æºï¼š

| æ•°æ®æº | è¯´æ˜ | ä¼˜åŠ¿ |
|--------|------|------|
| çœŸå®æ•°æ® | ä¸´åºŠé‡‡é›†çš„å°æ ·æœ¬æ•°æ®(100-200ç»„) | çœŸå®å¯é  |
| AIç”Ÿæˆæ•°æ® | GANç”Ÿæˆçš„è™šæ‹Ÿæ•°æ®(500-1000æ¡) | çªç ´æ ·æœ¬é™åˆ¶ |
| å…¬å¼€æ•°æ®åº“ | ODIRã€UK Biobankç­‰å…¬å¼€æ•°æ®é›† | å¢å¼ºæ³›åŒ–èƒ½åŠ› |

### 3. é£é™©é¢„æµ‹æ¨¡å‹

#### æ”¯æŒçš„æ¨¡å‹
- **éšæœºæ£®æ—**ï¼šé«˜å‡†ç¡®ç‡ï¼ŒæŠ—è¿‡æ‹Ÿåˆ
- **æ¢¯åº¦æå‡**ï¼šå¤„ç†éçº¿æ€§èƒ½åŠ›å¼º
- **é€»è¾‘å›å½’**ï¼šç®€å•å¿«é€Ÿï¼Œå¯è§£é‡Šæ€§å¥½
- **æ”¯æŒå‘é‡æœº**ï¼šå°æ ·æœ¬è¡¨ç°ä¼˜ç§€

#### é¢„æµ‹ç‰¹å¾ï¼ˆ11é¡¹å…³é”®æŒ‡æ ‡ï¼‰

**ä¸´åºŠç‰¹å¾**ï¼š
1. å¹´é¾„ (6-18å²)
2. æ€§åˆ«
3. çœ¼è½´é•¿åº¦ (22-28mm)
4. è„‰ç»œè†œåšåº¦ (100-400Î¼m)
5. çƒé•œåº¦æ•° (-10åˆ°0D)
6. æŸ±é•œåº¦æ•° (-3åˆ°0D)

**é—ä¼ ç‰¹å¾**ï¼š
7. çˆ¶æ¯è¿‘è§†æƒ…å†µ (0/1/2äºº)
8. é—ä¼ é£é™©åˆ†æ•° (0-100)

**è¡Œä¸ºç‰¹å¾**ï¼š
9. æˆ·å¤–æ´»åŠ¨æ—¶é—´ (1-8å°æ—¶/å¤©)
10. è¿‘è·ç¦»ç”¨çœ¼ (2-10å°æ—¶/å¤©)
11. å±å¹•æ—¶é—´ (0.5-6å°æ—¶/å¤©)

#### é£é™©åˆ†çº§
```
é£é™©æ¦‚ç‡ = model.predict_proba(è¾“å…¥æ•°æ®)[1]

if é£é™©æ¦‚ç‡ â‰¥ 0.7:
    é£é™©ç­‰çº§ = "é«˜é£é™©"
elif é£é™©æ¦‚ç‡ â‰¥ 0.3:
    é£é™©ç­‰çº§ = "ä¸­é£é™©"
else:
    é£é™©ç­‰çº§ = "ä½é£é™©"
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Docker 20.10+
- Docker Compose 2.0+
- Node.js 16+ (æœ¬åœ°å¼€å‘)
- Python 3.8+ (æœ¬åœ°å¼€å‘)

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/yin102570/myopia-risk-ai.git
cd myopia-risk-ai

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 3. è®¿é—®ç³»ç»Ÿ
æµè§ˆå™¨æ‰“å¼€: http://localhost:3000
```

### æœ¬åœ°å¼€å‘

#### åç«¯å¯åŠ¨
```bash
cd backend
pip install -r requirements.txt
python standalone_server.py
```

#### å‰ç«¯å¯åŠ¨
```bash
cd frontend
npm install
npm run dev
```

### äº‘æœåŠ¡å™¨éƒ¨ç½²

#### ä½¿ç”¨éƒ¨ç½²è„šæœ¬
```bash
chmod +x deploy.sh
./deploy.sh
```

#### æ‰‹åŠ¨éƒ¨ç½²
```bash
# 1. æ„å»ºDockeré•œåƒ
docker build -t myopia-risk-ai .

# 2. è¿è¡Œå®¹å™¨
docker run -d \
  -p 3000:3000 \
  --name myopia-risk-ai \
  myopia-risk-ai

# 3. ä½¿ç”¨Docker Compose
docker-compose up -d
```

---

## ğŸ“¡ APIæ¥å£æ–‡æ¡£

### å¥åº·æ£€æŸ¥
```http
GET /api/health
```

**å“åº”**ï¼š
```json
{
  "status": "ok",
  "timestamp": "2024-01-28T12:00:00Z"
}
```

### é£é™©é¢„æµ‹
```http
POST /api/predict
Content-Type: application/json
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "age": 12,
  "gender": 1,
  "axial_length": 25.5,
  "choroidal_thickness": 250,
  "sphere": -3.5,
  "cylinder": -0.75,
  "parent_myopia": 1,
  "genetic_risk_score": 65,
  "outdoor_hours": 2,
  "near_work_hours": 6,
  "screen_time_hours": 3
}
```

**å“åº”**ï¼š
```json
{
  "risk_probability": 0.72,
  "risk_level": "é«˜é£é™©",
  "advice": "å»ºè®®ï¼šå¢åŠ æˆ·å¤–å…‰ç…§+å®šæœŸçœ¼ç§‘æ£€æŸ¥",
  "feature_importance": {
    "age": 0.15,
    "axial_length": 0.25,
    "outdoor_hours": 0.12
  }
}
```

### æ•°æ®ç”Ÿæˆ
```http
POST /api/data/generate
Content-Type: application/json
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "n_samples": 500,
  "distribution_type": "balanced",
  "risk_weights": {
    "low": 0.4,
    "medium": 0.3,
    "high": 0.3
  }
}
```

**å“åº”**ï¼š
```json
{
  "task_id": "task-1234567890-abcdef12",
  "status": "pending",
  "message": "æ•°æ®ç”Ÿæˆä»»åŠ¡å·²åˆ›å»º",
  "download_url": "/api/download/data_generate_20240128.csv"
}
```

### æ¨¡å‹è®­ç»ƒ
```http
POST /api/model/train
Content-Type: application/json
```

**è¯·æ±‚ä½“**ï¼š
```json
{
  "model_type": "rf",
  "test_size": 0.2,
  "n_estimators": 100,
  "max_depth": 20,
  "random_seed": null
}
```

**å“åº”**ï¼š
```json
{
  "task_id": "task-1234567890-abcdef12",
  "status": "pending",
  "message": "æ¨¡å‹è®­ç»ƒä»»åŠ¡å·²åˆ›å»º"
}
```

### ä»»åŠ¡æŸ¥è¯¢
```http
GET /api/tasks/{task_id}
```

**å“åº”**ï¼š
```json
{
  "id": "task-1234567890-abcdef12",
  "status": "completed",
  "progress": 100,
  "message": "ä»»åŠ¡å®Œæˆ",
  "result": {
    "accuracy": 0.85,
    "precision": 0.82,
    "recall": 0.78
  },
  "logs": [
    "å¼€å§‹è®­ç»ƒæ¨¡å‹...",
    "æ•°æ®é¢„å¤„ç†å®Œæˆ...",
    "æ¨¡å‹è®­ç»ƒå®Œæˆ..."
  ]
}
```

### æ–‡ä»¶ä¸‹è½½
```http
GET /api/download/{filename}
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
myopia-risk-ai/
â”œâ”€â”€ backend/                      # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app.py                   # Flaskä¸»åº”ç”¨
â”‚   â”œâ”€â”€ app_simple.py            # ç®€åŒ–ç‰ˆAPI
â”‚   â”œâ”€â”€ server.js                # ExpressæœåŠ¡å™¨
â”‚   â”œâ”€â”€ models/                  # æ¨¡å‹ç›®å½•
â”‚   â”‚   â”œâ”€â”€ data_generator.py    # GANæ•°æ®ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ risk_predictor.py    # é£é™©é¢„æµ‹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ predict.py           # é¢„æµ‹åŒ…è£…
â”‚   â”œâ”€â”€ requirements.txt         # Pythonä¾èµ–
â”‚   â””â”€â”€ package.json             # Nodeä¾èµ–
â”‚
â”œâ”€â”€ frontend/                     # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx    # ä»ªè¡¨ç›˜ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ RiskPredictor.tsx # é£é™©é¢„æµ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ DataGenerator.tsx # æ•°æ®ç”Ÿæˆ
â”‚   â”‚   â”‚   â””â”€â”€ ModelTraining.tsx # æ¨¡å‹è®­ç»ƒ
â”‚   â”‚   â”œâ”€â”€ App.tsx              # ä¸»åº”ç”¨
â”‚   â”‚   â””â”€â”€ main.tsx             # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html               # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ package.json             # ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.ts           # Viteé…ç½®
â”‚
â”œâ”€â”€ standalone_server.py         # ç‹¬ç«‹æœåŠ¡å™¨ï¼ˆæ¨èï¼‰
â”œâ”€â”€ standalone_server_fixed.py   # ä¿®å¤ç‰ˆæœåŠ¡å™¨
â”œâ”€â”€ standalone_server_v2.py       # V2ç‰ˆæœ¬æœåŠ¡å™¨
â”‚
â”œâ”€â”€ test_api.py                  # APIæµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_predict.py              # é¢„æµ‹æµ‹è¯•è„šæœ¬
â”‚
â”œâ”€â”€ Dockerfile                   # Dockeré•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ Dockerfile.simple            # ç®€åŒ–ç‰ˆDockerfile
â”œâ”€â”€ docker-compose.yml          # Docker Composeé…ç½®
â”‚
â”œâ”€â”€ deploy.sh                    # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ deploy_server.sh             # æœåŠ¡å™¨éƒ¨ç½²è„šæœ¬
â”‚
â”œâ”€â”€ start.bat                    # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_server.bat             # æœåŠ¡å™¨å¯åŠ¨è„šæœ¬
â”‚
â”œâ”€â”€ å¯åŠ¨è¯´æ˜.md                  # ä¸­æ–‡å¯åŠ¨è¯´æ˜
â”‚
â””â”€â”€ README.md                    # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸ¨ ç•Œé¢åŠŸèƒ½

### 1. ä»ªè¡¨ç›˜ (Dashboard)
- ç³»ç»ŸçŠ¶æ€æ¦‚è§ˆ
- ä»»åŠ¡æ‰§è¡Œç»Ÿè®¡
- æ¨¡å‹æ€§èƒ½æŒ‡æ ‡
- æ•°æ®åˆ†å¸ƒå›¾è¡¨

### 2. é£é™©é¢„æµ‹ (Risk Predictor)
- 11é¡¹å‚æ•°è¾“å…¥è¡¨å•
- å®æ—¶é£é™©è¯„åˆ†
- é£é™©ç­‰çº§æ˜¾ç¤º
- ä¸ªæ€§åŒ–é˜²æ§å»ºè®®
- å†å²è®°å½•æŸ¥è¯¢

### 3. æ•°æ®ç”Ÿæˆ (Data Generator)
- é…ç½®ç”Ÿæˆå‚æ•°
- å¯åŠ¨GANè®­ç»ƒ
- å®æ—¶è¿›åº¦ç›‘æ§
- æ•°æ®è´¨é‡éªŒè¯
- æ–‡ä»¶ä¸‹è½½

### 4. æ¨¡å‹è®­ç»ƒ (Model Training)
- é€‰æ‹©æ¨¡å‹ç±»å‹
- é…ç½®è¶…å‚æ•°
- è®­ç»ƒè¿›åº¦è·Ÿè¸ª
- æ€§èƒ½è¯„ä¼°æŠ¥å‘Š
- æ¨¡å‹ä¿å­˜å’Œä¸‹è½½

### 5. ä»»åŠ¡ç®¡ç† (Task Manager)
- ä»»åŠ¡åˆ—è¡¨å±•ç¤º
- çŠ¶æ€å®æ—¶æ›´æ–°
- æ—¥å¿—æŸ¥çœ‹
- è¿›åº¦ç™¾åˆ†æ¯”
- ç»“æœä¸‹è½½

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ

**è®¾è®¡ç†å¿µ**ï¼šè§£å†³é•¿æ—¶é—´è¿è¡Œä»»åŠ¡çš„å¼‚æ­¥æ‰§è¡Œå’Œè¿›åº¦è·Ÿè¸ªé—®é¢˜

**æ ¸å¿ƒç±»**ï¼šTaskManager
```python
class TaskManager:
    @staticmethod
    def create_task(task_type, params=None):
        """åˆ›å»ºæ–°ä»»åŠ¡"""
        task_id = f'task-{timestamp}-{uuid}'
        tasks[task_id] = {
            'id': task_id,
            'type': task_type,
            'status': 'pending',
            'progress': 0,
            'message': 'ä»»åŠ¡å·²åˆ›å»º',
            'created_at': datetime.now(),
            'result': None,
            'logs': []
        }
        return task_id

    @staticmethod
    def update_task(task_id, **kwargs):
        """æ›´æ–°ä»»åŠ¡çŠ¶æ€"""
        if task_id in tasks:
            tasks[task_id].update(kwargs)
```

**ä»»åŠ¡çŠ¶æ€æµè½¬**ï¼š
```
pending â†’ running â†’ completed
         â†˜ failed
```

**å¹¶å‘æ§åˆ¶**ï¼š
- ä½¿ç”¨çº¿ç¨‹é”ç¡®ä¿çº¿ç¨‹å®‰å…¨
- æ”¯æŒå¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œ
- é¿å…èµ„æºç«äº‰

### 2. å¤šæ¨¡æ€æ•°æ®ç”Ÿæˆ

**æ•°æ®æ¨¡æ€**ï¼š

1. **ä¸´åºŠæ•°æ®**ï¼š
   - å¹´é¾„ã€çœ¼è½´é•¿åº¦ã€è„‰ç»œè†œåšåº¦ã€çƒé•œã€æŸ±é•œ
   - åŸºäºåŒ»å­¦çŸ¥è¯†å»ºç«‹ç‰¹å¾ç›¸å…³æ€§

2. **äººå£ç»Ÿè®¡**ï¼š
   - æ€§åˆ«ã€çˆ¶æ¯è¿‘è§†æƒ…å†µ
   - ç‹¬ç«‹æ¦‚ç‡åˆ†å¸ƒ

3. **è¡Œä¸ºæ•°æ®**ï¼š
   - æˆ·å¤–æ´»åŠ¨ã€è¿‘è·ç¦»ç”¨çœ¼ã€å±å¹•æ—¶é—´ã€é—ä¼ é£é™©
   - ä¸è¿‘è§†é£é™©é«˜åº¦ç›¸å…³

**ç”Ÿæˆç®—æ³•**ï¼š
```python
def generate_synthetic_data(n_samples, distribution_type, risk_weights):
    # ç”Ÿæˆå¹´é¾„ï¼ˆ6-18å²å‡åŒ€åˆ†å¸ƒï¼‰
    age = np.random.uniform(6, 19, n_samples)

    # ç”Ÿæˆçœ¼è½´é•¿åº¦ï¼ˆéšå¹´é¾„å¢é•¿ï¼‰
    axial_length = np.random.normal(
        23 + (age - 6) * 0.1,  # å‡å€¼éšå¹´é¾„å¢åŠ 
        1.2,                     # æ ‡å‡†å·®
        n_samples
    )

    # ç”Ÿæˆè„‰ç»œè†œåšåº¦ï¼ˆä¸çœ¼è½´è´Ÿç›¸å…³ï¼‰
    choroidal_thickness = np.random.normal(
        300 - (axial_length - 23) * 10,  # çœ¼è½´è¶Šé•¿ï¼Œè„‰ç»œè†œè¶Šè–„
        40,
        n_samples
    )

    # æ ¹æ®é£é™©æƒé‡åˆ†é…æ ‡ç­¾
    labels = np.random.choice(
        ['low', 'medium', 'high'],
        n_samples,
        p=[risk_weights['low'], risk_weights['medium'], risk_weights['high']]
    )

    return DataFrame({æ‰€æœ‰ç‰¹å¾})
```

### 3. æ¨¡å‹è®­ç»ƒä¼˜åŒ–

**å¯é…ç½®å‚æ•°**ï¼š
- `random_seed`ï¼šæ§åˆ¶éšæœºæ€§ï¼ˆNone=æ—¶é—´æˆ³ï¼Œä¿è¯æ¯æ¬¡ç»“æœä¸åŒï¼‰
- `test_size`ï¼šæµ‹è¯•é›†æ¯”ä¾‹ï¼ˆ0.1-0.5ï¼‰
- `n_estimators`ï¼šå†³ç­–æ ‘æ•°é‡ï¼ˆ50-200ï¼‰
- `max_depth`ï¼šæ ‘çš„æœ€å¤§æ·±åº¦ï¼ˆ10-50ï¼‰

**å·®å¼‚åŒ–è®­ç»ƒ**ï¼š
```python
def train_model(data, params):
    # ä½¿ç”¨ä¸åŒéšæœºç§å­
    if params['random_seed'] is None:
        random_seed = int(time.time())
    else:
        random_seed = params['random_seed']

    # åˆ’åˆ†æ•°æ®é›†
    X_train, X_test, y_train, y_test = train_test_split(
        X, y,
        test_size=params['test_size'],
        random_state=random_seed
    )

    # è®­ç»ƒæ¨¡å‹
    model = RandomForestClassifier(
        n_estimators=params['n_estimators'],
        max_depth=params['max_depth'],
        random_state=random_seed
    )
    model.fit(X_train, y_train)

    return model, evaluate(X_test, y_test)
```

### 4. æ€§èƒ½ä¼˜åŒ–

**æ¨¡å‹ç¼“å­˜**ï¼š
```python
@st.cache_resource(ttl=3600)
def load_model():
    return joblib.load('model.pkl')
```

**å¼‚æ­¥å¤„ç†**ï¼š
```python
def background_task(task_id, func, params):
    """åå°æ‰§è¡Œä»»åŠ¡"""
    with thread_lock:
        update_task(task_id, status='running')

    try:
        result = func(**params)
        update_task(task_id, status='completed', result=result)
    except Exception as e:
        update_task(task_id, status='failed', message=str(e))
```

**æ–‡ä»¶ç®¡ç†**ï¼š
```python
def save_file(data, filename):
    """ä¿å­˜æ–‡ä»¶åˆ°downloadsç›®å½•"""
    filepath = os.path.join(DOWNLOAD_DIR, filename)
    if filename.endswith('.csv'):
        data.to_csv(filepath, index=False)
    elif filename.endswith('.pkl'):
        joblib.dump(data, filepath)
    return filepath
```

---

## ğŸ“Š ç³»ç»Ÿæ¼”è¿›å†ç¨‹

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç³»ç»Ÿæ­å»º
**ç›®æ ‡**ï¼šæ„å»ºå¯è¿è¡Œçš„åŸå‹ç³»ç»Ÿ

**æˆæœ**ï¼š
- åŸºç¡€çš„Flask API
- ç®€å•çš„Reactå‰ç«¯
- å•ä¸€é£é™©é¢„æµ‹æ¨¡å‹
- åŸºæœ¬çš„æ•°æ®è¾“å…¥åŠŸèƒ½

**å±€é™æ€§**ï¼š
- å›ºå®šçš„éšæœºç§å­ï¼ˆæ¯æ¬¡ç»“æœç›¸åŒï¼‰
- ç¡¬ç¼–ç çš„å‚æ•°
- ç¼ºå°‘ä»»åŠ¡è·Ÿè¸ª

### ç¬¬äºŒé˜¶æ®µï¼šä»»åŠ¡ç®¡ç†ä¸çœŸå®è®­ç»ƒ
**ç›®æ ‡**ï¼šå®ç°çœŸå®çš„æ•°æ®ç”Ÿæˆå’Œæ¨¡å‹è®­ç»ƒ

**æˆæœ**ï¼š
- å®Œæ•´çš„TaskManagerç³»ç»Ÿ
- å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œ
- å®æ—¶è¿›åº¦è·Ÿè¸ª
- çœŸå®çš„GANæ•°æ®ç”Ÿæˆ
- çœŸå®çš„æ¨¡å‹è®­ç»ƒæµç¨‹

**åˆ›æ–°ç‚¹**ï¼š
- ä»»åŠ¡IDæœºåˆ¶
- è¿›åº¦ç™¾åˆ†æ¯”æ›´æ–°
- æ—¥å¿—è®°å½•ç³»ç»Ÿ
- å¤šæ¨¡æ€æ•°æ®ç›¸å…³æ€§å»ºæ¨¡

### ç¬¬ä¸‰é˜¶æ®µï¼šå·®å¼‚åŒ–ä¸æ–‡ä»¶ä¸‹è½½
**ç›®æ ‡**ï¼šè§£å†³è®­ç»ƒç»“æœå•ä¸€å’Œç»“æœäº¤ä»˜é—®é¢˜

**æˆæœ**ï¼š
- å¯é…ç½®çš„éšæœºç§å­
- å¯è°ƒæ•´çš„è®­ç»ƒå‚æ•°
- æ–‡ä»¶è‡ªåŠ¨ä¿å­˜
- å®Œæ•´çš„ä¸‹è½½åŠŸèƒ½
- å¢å¼ºçš„UIäº¤äº’

**æŠ€æœ¯çªç ´**ï¼š
- å‚æ•°å·®å¼‚åŒ–è®¾è®¡
- æ—¶é—´æˆ³éšæœºç§å­
- æ–‡ä»¶å‘½åè§„èŒƒ
- send_fileä¸‹è½½å®ç°

---

## ğŸ¥ åŒ»å­¦èƒŒæ™¯

### è¿‘è§†å‘ç—…æœºåˆ¶

è¿‘è§†çš„å‘ç”Ÿå‘å±•æ˜¯å¤šç§å› ç´ å…±åŒä½œç”¨çš„ç»“æœï¼š

1. **é—ä¼ å› ç´ **ï¼š
   - çˆ¶æ¯è¿‘è§†æ˜¯é‡è¦é£é™©å› ç´ 
   - å¤šä¸ªåŸºå› ä½ç‚¹ä¸è¿‘è§†ç›¸å…³
   - é—ä¼ åº¦çº¦60-90%

2. **ç¯å¢ƒå› ç´ **ï¼š
   - è¿‘è·ç¦»ç”¨çœ¼æ—¶é—´è¿‡é•¿
   - æˆ·å¤–æ´»åŠ¨ä¸è¶³
   - ç”µå­å±å¹•ä½¿ç”¨æ—¶é—´å¢åŠ 

3. **ç”Ÿç†æœºåˆ¶**ï¼š
   - çœ¼è½´è¿‡åº¦å¢é•¿
   - å·©è†œèƒ¶åŸä»£è°¢å¼‚å¸¸
   - è§†ç½‘è†œä¿¡å·ä¼ å¯¼å¼‚å¸¸
   - è§†ç½‘è†œå‘¨è¾¹ç¦»ç„¦

### ç”Ÿç‰©æ ‡å¿—ç‰©é€‰æ‹©ä¾æ®

| ç”Ÿç‰©æ ‡å¿—ç‰© | åŒ»å­¦æ„ä¹‰ | é€‰æ‹©ä¾æ® |
|-----------|----------|----------|
| çœ¼è½´é•¿åº¦ | è¿‘è§†è¯Šæ–­çš„é‡‘æ ‡å‡† | ç›´æ¥åæ˜ çœ¼çƒå¤§å° |
| è„‰ç»œè†œåšåº¦ | çœ¼çƒä¾›è¡€çŠ¶æ€ | è„‰ç»œè†œå˜è–„æç¤ºè¿‘è§†è¿›å±• |
| çƒé•œåº¦æ•° | å±ˆå…‰åº¦æ•° | è¿‘è§†ä¸¥é‡ç¨‹åº¦æŒ‡æ ‡ |
| æˆ·å¤–æ´»åŠ¨æ—¶é—´ | ä¿æŠ¤æ€§å› ç´  | è‡ªç„¶å…‰åˆºæ¿€å¤šå·´èƒºåˆ†æ³Œ |
| è¿‘è·ç¦»ç”¨çœ¼æ—¶é—´ | é£é™©å› ç´  | è°ƒèŠ‚æ€§è¿‘è§†è¯±å›  |
| çˆ¶æ¯è¿‘è§† | é—ä¼ é£é™© | å®¶æ—å²çš„é‡è¦æŒ‡æ ‡ |

---

## âš ï¸ å…è´£å£°æ˜

1. **ç§‘ç ”ç”¨é€”**ï¼šæœ¬ç³»ç»Ÿä»…ä¾›ç§‘ç ”å’Œæ•™å­¦ä½¿ç”¨ï¼Œä¸æ„æˆåŒ»ç–—è¯Šæ–­
2. **ä¸“ä¸šå’¨è¯¢**ï¼šå¦‚æœ‰å¥åº·é—®é¢˜ï¼Œè¯·å’¨è¯¢ä¸“ä¸šçœ¼ç§‘åŒ»ç”Ÿ
3. **æ•°æ®éšç§**ï¼šç”¨æˆ·è¾“å…¥æ•°æ®ä¸ä¼šè¢«ä¿å­˜æˆ–ä¸Šä¼ 
4. **ç»“æœè§£é‡Š**ï¼šé¢„æµ‹ç»“æœéœ€ç»“åˆä¸´åºŠç—‡çŠ¶ç»¼åˆåˆ¤æ–­
5. **æŒç»­æ›´æ–°**ï¼šæ¨¡å‹å’Œç®—æ³•å¯èƒ½éšç ”ç©¶è¿›å±•è€Œæ›´æ–°

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘æµç¨‹

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/AmazingFeature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add some AmazingFeature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/AmazingFeature`
5. æäº¤Pull Request

### ä»£ç è§„èŒƒ

- Pythonéµå¾ªPEP 8è§„èŒƒ
- TypeScriptä½¿ç”¨ESLint
- æäº¤ä¿¡æ¯ä½¿ç”¨Conventional Commits

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ‘¨â€ğŸ’» ä½œè€…

**å°¹å®¶è‰º** (Jiayi Yin)
- Email: qzasdf123@outlook.com
- GitHub: [yin102570](https://github.com/yin102570)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å›¢é˜Ÿå’Œé¡¹ç›®çš„æ”¯æŒï¼š

- ODIRæ•°æ®é›†æä¾›æ–¹
- UK Biobanké¡¹ç›®
- TensorFlowå¼€æºç¤¾åŒº
- Scikit-learnå¼€å‘å›¢é˜Ÿ
- Reactå¼€æºç¤¾åŒº
- Material-UIå›¢é˜Ÿ

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ [GitHub Issue](https://github.com/yin102570/myopia-risk-ai/issues)
- å‘é€é‚®ä»¶è‡³ï¼šqzasdf123@outlook.com

---

## ğŸŒŸ ç›¸å…³é¡¹ç›®

- [myopia-risk-app](https://github.com/yin102570/myopia-risk-app) - Streamlitç‰ˆæœ¬çš„è¿‘è§†é£é™©é¢„æµ‹ç³»ç»Ÿ
- [stock-monitor](https://github.com/yin102570/stock-monitor) - è‚¡ç¥¨ç›‘æ§ç³»ç»Ÿ
- [task-manager](https://github.com/yin102570/task-manager) - ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼**
